(self.webpackChunkblog=self.webpackChunkblog||[]).push([[51],{48051:function(e,t,n){"use strict";n.r(t),n.d(t,{HandlerType:function(){return g},Logger:function(){return f},StatusType:function(){return l},datadogLogs:function(){return z}});var r,o,i=n(38499),a=n(49120),s=n(52912),u=n(66742),c=n(78138),l={debug:"debug",error:"error",info:"info",warn:"warn"},d=((r={})[l.debug]=0,r[l.info]=1,r[l.warn]=2,r[l.error]=3,r),g=(Object.keys(l),{console:"console",http:"http",silent:"silent"}),f=function(){function e(e,t,n,r){void 0===t&&(t=g.http),void 0===n&&(n=l.debug),void 0===r&&(r={}),this.sendLog=e,this.handlerType=t,this.level=n,this.contextManager=(0,a.W)(),this.contextManager.set(r)}return e.prototype.log=function(e,t,n){if(void 0===n&&(n=l.info),d[n]>=d[this.level])switch(this.handlerType){case g.http:this.sendLog((0,i.pi)({message:e,status:n},(0,s.$e)(this.contextManager.get(),t)));break;case g.console:console.log(n+": "+e,(0,s.$e)(this.contextManager.get(),t));break;case g.silent:}},e.prototype.debug=function(e,t){this.log(e,t,l.debug)},e.prototype.info=function(e,t){this.log(e,t,l.info)},e.prototype.warn=function(e,t){this.log(e,t,l.warn)},e.prototype.error=function(e,t){var n={error:{origin:u.zH.LOGGER}};this.log(e,(0,s.$e)(n,t),l.error)},e.prototype.setContext=function(e){this.contextManager.set(e)},e.prototype.addContext=function(e,t){this.contextManager.add(e,t)},e.prototype.removeContext=function(e){this.contextManager.remove(e)},e.prototype.setHandler=function(e){this.handlerType=e},e.prototype.setLevel=function(e){this.level=e},(0,i.gn)([c.Th],e.prototype,"log",null),e}(),p=n(20323),h=n(85145),v=n(82753),T=n(12728),b=n(67955),k=n(12510),y=n(62503),w=n(75954),C=n(78111),m=n(32773);function x(e,t){if(!t){var n=L(e)===o.TRACKED;return{getId:function(){},isTracked:function(){return n}}}var r=(0,m.M_)(e.cookieOptions,"logs",(function(t){return function(e,t){var n=function(e){return e===o.NOT_TRACKED||e===o.TRACKED}(t)?t:L(e);return{trackingType:n,isTracked:n===o.TRACKED}}(e,t)}));return{getId:r.getId,isTracked:function(){return r.getTrackingType()===o.TRACKED}}}function L(e){return(0,h.y7)(e.sampleRate)?o.TRACKED:o.NOT_TRACKED}!function(e){e.NOT_TRACKED="0",e.TRACKED="1"}(o||(o={}));var R={buildMode:"release",datacenter:"us",sdkVersion:"2.6.2"},D=["view.url","view.referrer","message","error.stack","http.url"];function E(e){var t=window.DD_RUM;return t&&t.getInternalContext?t.getInternalContext(e):void 0}var z=function(e){var t=!1,n=(0,a.W)(),r={},o=new v.S,u=function(e,t){o.add([e,t])},l=new f(d);return(0,p.r5)({logger:l,init:(0,c.zk)((function(r){(function(e){if(t)return e.silentMultipleInit||console.error("DD_LOGS is already initialized."),!1;if(!e||!e.publicApiKey&&!e.clientToken)return console.error("Client Token is not configured, we will not send any data."),!1;if(void 0!==e.sampleRate&&!(0,h.zz)(e.sampleRate))return console.error("Sample Rate should be a number between 0 and 100"),!1;return!0})(r)&&(r.publicApiKey&&(r.clientToken=r.publicApiKey,console.warn("Public API Key is deprecated. Please use Client Token instead.")),u=e(r,l,n.get),o.drain((function(e){var t=e[0],n=e[1];return u(t,n)})),t=!0)})),getLoggerGlobalContext:(0,c.zk)(n.get),setLoggerGlobalContext:(0,c.zk)(n.set),addLoggerGlobalContext:(0,c.zk)(n.add),removeLoggerGlobalContext:(0,c.zk)(n.remove),createLogger:(0,c.zk)((function(e,t){return void 0===t&&(t={}),r[e]=new f(d,t.handler,t.level,(0,i.pi)((0,i.pi)({},t.context),{logger:{name:e}})),r[e]})),getLogger:(0,c.zk)((function(e){return r[e]}))});function d(e){u(e,(0,s.$e)({date:Date.now(),view:{referrer:document.referrer,url:window.location.href}},n.get()))}}((function(e,t,n){var r=(0,p.mC)(e,R),o=r.configuration,i=r.internalMonitoring;return function(e,t,n,r,o,i){n.setExternalContextProvider((function(){return(0,s.$e)({session_id:r.getId()},i(),E())}));var a=function(e,t){return function(n,r){if(e.isTracked()){var o=(0,s.$e)({service:t.service,session_id:e.getId()},r,E(),n);if(t.beforeSend)if(!1===(0,C.O)(o,D,t.beforeSend))return;return o}}}(r,e),u=function(e){var t,n=r(e.logsEndpoint);void 0!==e.replica&&(t=r(e.replica.logsEndpoint));function r(t){return new w.E(new w.a(t,e.batchBytesLimit),e.maxBatchSize,e.batchBytesLimit,e.maxMessageSize,e.flushTimeout)}return{add:function(e){n.add(e),t&&t.add(e)}}}(e);return t.subscribe((function(e){o.error(e.message,(0,s.$e)({date:(0,y.dg)(e.startTime),error:{kind:e.type,origin:e.source,stack:e.stack}},e.resource?{http:{method:e.resource.method,status_code:e.resource.statusCode,url:e.resource.url}}:void 0,E(e.startTime)))})),function(e,t){var n=a(e,t);n&&u.add(n)}}(o,!1!==e.forwardErrorsToLogs?(0,T.pR)(o):new b.y,i,x(o,(0,k.oX)(o.cookieOptions)),t,n)}));(0,p.y)((0,h.Rf)(),"DD_LOGS",z)}}]);
//# sourceMappingURL=51-098a0fc3aa2992cbbdf5.js.map